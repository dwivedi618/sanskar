<section style="min-height: calc(100vh-6rem);" style="margin-bottom: 5rem;">
    <div class="fadeIn" style="max-height: 100vh;">
        <mat-card class="card border-0  p-0" style="font-size: 12px;">
            <mat-vertical-stepper #stepper>
                <mat-step [stepControl]="studentForm" class="">
                    <form class="stepper_form my-4 py-2 " [formGroup]="studentForm">
                        <ng-template matStepLabel>Required Student Details</ng-template>
                        <div class=" d-flex justify-content-center">
                            <div class="col-sm-12 col-md-10 col-lg-10">
                                <div class="mb-2">
                                    <mat-label class="text-primary ">Student's Information</mat-label>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">

                                        <ng-container
                                            *ngFor="let field of admissionFormFields.staticFields.studentInfo">
                                            <ng-container *ngIf="field.fieldType === 'text'">
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>{{field.label}}</mat-label>
                                                    <input matInput placeholder={{field.label}} type="text"
                                                        name="{{field.fieldName}}" required="{{field.isMandatory}}"
                                                        disabled="{{!field.isEnabled}}" value={{field.value}}>
                                                    <!-- <mat-error *ngIf="{{`f1[${field.fieldName}].hasError('required')`}}">Name Required
                                                    </mat-error> -->
                                                </mat-form-field>
                                            </ng-container>
                                            <ng-container *ngIf="field.fieldType === 'date'">
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>{{field.label}}</mat-label>
                                                    <input matInput type="date" name="{{field.fieldName}}"
                                                        value="{{field.value}}">
                                                </mat-form-field>
                                            </ng-container>
                                            <ng-container *ngIf="field.fieldType === 'dropdown'">
                                                <!-- bloodGroup -->
                                                <mat-form-field appearance="outline" class="example-full-width">
                                                    <mat-label>{{field.label}}</mat-label>
                                                    <mat-select placeholder={{field.label}} name="{{field.fieldName}}"
                                                        value="{{field.value}}">
                                                        <mat-option *ngFor="let opt of field.options"
                                                            [value]="opt.value">
                                                            {{opt.label}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </ng-container>
                                            <ng-container *ngIf="field.fieldType === 'radio'">
                                                <div class="my-4">
                                                    <div class="d-flex box_shadow_0 space-between"
                                                        style="background: #00000005;">
                                                        <div *ngFor="let opt of field.options"
                                                            class="form-row d-flex box_shadow_0 align-items-center justify-content-center">
                                                            <input type="radio" name="{{field.fieldName}}"
                                                                value="{{opt.value}}" id="{{opt.value}}"
                                                                class="form-input">
                                                            <span class="material-symbols-outlined fs-16 mr-1">
                                                                {{opt.icon | lowercase}}
                                                            </span>
                                                            <label for="{{opt.value}}" class="form-label">{{opt.label |
                                                                uppercase}} {{field.value == opt.value}}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                        </ng-container>
                                    </div>
                                    <div class="col-md-6  g-2">
                                        <div class="d-flex justify-content-center text-center">
                                            <div>
                                                <div class="box_shadow_3 mx-auto layout rounded-lg"
                                                    style="position:relative;width:200px;min-height: 200px;border: 1px solid #ccc ;">
                                                    <div class="rounded-pill box_shadow_0 bg-white my-auto"
                                                        style="position: absolute;left: -20px;">
                                                        <div class="d-flex flex-column rounded-pill ">
                                                            <button mat-icon-button class="m-0 p-0 bb"
                                                                (click)="fileUpload.click()">
                                                                <mat-icon style="font-size: 16px;">add_circle</mat-icon>
                                                            </button>
                                                            <button mat-icon-button class="m-0 p-0 bb">
                                                                <mat-icon style="font-size: 16px;">crop</mat-icon>
                                                            </button>
                                                            <button mat-icon-button class="m-0 p-0"
                                                                (click)="fileUploadReset()">
                                                                <mat-icon style="font-size: 16px;">clear</mat-icon>
                                                            </button>
                                                        </div>
                                                        <input type="file" formControlName="image" #fileUpload
                                                            (change)="onImagePicked($event)"
                                                            style="width: 0;height: 0;visibility: hidden;"
                                                            accept="image/png,image/jpeg">
                                                    </div>
                                                    <div *ngIf="!imagePreview" (click)="fileUpload.click()"
                                                        style="cursor: pointer;">
                                                        <!-- <button mat-icon-button class="m-0">
                                                        <mat-icon>add_circle</mat-icon>
                                                    </button> -->
                                                        <!-- <img src="../../assets/icons/persion.svg" width="40"> -->
                                                        <mat-icon style="color:#666;width: 100%;">add_a_photo</mat-icon>
                                                        <p mat-line class="text-muted py-2">Upload Photo</p>
                                                    </div>
                                                    <div *ngIf="imagePreview!=='' && imagePreview">
                                                        <img class="thumbnail-md" [src]="imagePreview"
                                                            style="border-radius: 4px;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-end my-4">
                                    <button mat-raised-button type="submit" color="primary" (click)="onStudentSubmit()"
                                        matStepperNext>Save and
                                        Next</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </mat-step>

                <mat-step [stepControl]="parentForm">
                    <form class="stepper_form" [formGroup]="parentForm" (ngSubmit)=onParentSubmit()>
                        <ng-template matStepLabel>Parents Details</ng-template>
                        <div class=" d-flex justify-content-center">
                            <div class="col-sm-12 col-md-8 col-lg-8">
                                <ng-container *ngFor="let field of admissionFormFields.staticFields.parentsInfo">
                                    <ng-container *ngIf="field.fieldType === 'text'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput placeholder={{field.label}} type="text"
                                                name="{{field.fieldName}}" required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" value={{field.value}}>
                                            <!-- <mat-error *ngIf="{{`f1[${field.fieldName}].hasError('required')`}}">Name Required
                                            </mat-error> -->
                                        </mat-form-field>
                                    </ng-container>

                                    <ng-container *ngIf="field.fieldType === 'number'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput placeholder={{field.label}} type="number"
                                                name="{{field.fieldName}}" required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" value={{field.value}} pattern="commonConfig.patterns[field.mobile]" maxlength="{{field.maxFieldLength}}">
                                            <!-- <mat-error *ngIf="{{`f1[${field.fieldName}].hasError('required')`}}">Name Required
                                            </mat-error> -->
                                        </mat-form-field>
                                    </ng-container>

                                    <ng-container *ngIf="field.fieldType === 'date'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput type="date" name="{{field.fieldName}}"
                                                required="{{field.isMandatory}}" disabled="{{!field.isEnabled}}"
                                                value="{{field.value}}">
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngIf="field.fieldType === 'dropdown'">
                                        <!-- bloodGroup -->
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <mat-select placeholder={{field.label}} required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" name="{{field.fieldName}}"
                                                value="{{field.value}}">
                                                <mat-option *ngFor="let opt of field.options" [value]="opt.value">
                                                    {{opt.label}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngIf="field.fieldType === 'radio'">
                                        <div class="my-4">
                                            <div class="d-flex box_shadow_0 space-between"
                                                style="background: #00000005;">
                                                <div *ngFor="let opt of field.options"
                                                    class="form-row d-flex box_shadow_0 align-items-center justify-content-center">
                                                    <input type="radio" name="{{field.fieldName}}" value="{{opt.value}}"
                                                        required="{{field.isMandatory}}" disabled="{{!field.isEnabled}}"
                                                        id="{{opt.value}}" class="form-input">
                                                    <span class="material-symbols-outlined fs-16 mr-1">
                                                        {{opt.icon | lowercase}}
                                                    </span>
                                                    <label for="{{opt.value}}" class="form-label">{{opt.label |
                                                        uppercase}} {{field.value == opt.value}}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </ng-container>
                                <div class="d-flex justify-content-around my-4">
                                    <button mat-raised-button matStepperPrevious>Back</button>
                                    <div class="spacer"></div>
                                    <button mat-raised-button matStepperNext color="primary">Save and Next</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </mat-step>
                <mat-step [stepControl]="addressForm">
                    <form class="stepper_form" [formGroup]="addressForm" (ngSubmit)="onAddressSubmit()">
                        <ng-template matStepLabel>Address</ng-template>
                        <div class=" d-flex justify-content-center">
                            <div class="col-sm-12 col-md-8 col-lg-8">

                                <div class="mb-2">
                                    <mat-label class="text-primary">Permanent Address</mat-label>
                                </div>

                                <ng-container *ngFor="let field of admissionFormFields.staticFields.permanentAddress">
                                    <ng-container *ngIf="field.fieldType === 'text'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput placeholder={{field.label}} type="text"
                                                name="{{field.fieldName}}" required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" value={{field.value}}>
                                            <!-- <mat-error *ngIf="{{`f1[${field.fieldName}].hasError('required')`}}">Name Required
                                            </mat-error> -->
                                        </mat-form-field>
                                    </ng-container>

                                    <ng-container *ngIf="field.fieldType === 'number'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput placeholder={{field.label}} type="number"
                                                name="{{field.fieldName}}" required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" value={{field.value}}>
                                            <!-- <mat-error *ngIf="{{`f1[${field.fieldName}].hasError('required')`}}">Name Required
                                            </mat-error> -->
                                        </mat-form-field>
                                    </ng-container>

                                    <ng-container *ngIf="field.fieldType === 'date'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput type="date" name="{{field.fieldName}}"
                                                required="{{field.isMandatory}}" disabled="{{!field.isEnabled}}"
                                                value="{{field.value}}">
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngIf="field.fieldType === 'dropdown'">
                                        <!-- bloodGroup -->
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <mat-select placeholder={{field.label}} 
                                                required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" 
                                                name="{{field.fieldName}}"
                                                value="{{field.value}}">
                                                <mat-option *ngFor="let opt of field.options" [value]="opt.value">
                                                    {{opt.label}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngIf="field.fieldType === 'radio'">
                                        <div class="my-4">
                                            <div class="d-flex box_shadow_0 space-between"
                                                style="background: #00000005;">
                                                <div *ngFor="let opt of field.options"
                                                    class="form-row d-flex box_shadow_0 align-items-center justify-content-center">
                                                    <input type="radio" name="{{field.fieldName}}" value="{{opt.value}}"
                                                        required="{{field.isMandatory}}" disabled="{{!field.isEnabled}}"
                                                        id="{{opt.value}}" class="form-input">
                                                    <span class="material-symbols-outlined fs-16 mr-1">
                                                        {{opt.icon | lowercase}}
                                                    </span>
                                                    <label for="{{opt.value}}" class="form-label">{{opt.label |
                                                        uppercase}} {{field.value == opt.value}}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                    <ng-container *ngIf="field.fieldType === 'checkbox'">
                                        <mat-checkbox class="example-full-width" 
                                             [disabled]="!field.isEnabled" >
                                            {{field.label}}
                                        </mat-checkbox>
                                    </ng-container>
                                </ng-container>

                                <div class="mb-2">
                                    <mat-label class="text-primary">Local Address</mat-label>
                                </div>

                                <ng-container *ngFor="let field of admissionFormFields.staticFields.currentAddress">
                                    <ng-container *ngIf="field.fieldType === 'text'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput placeholder={{field.label}} type="text"
                                                name="{{field.fieldName}}" required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" value={{field.value}}>
                                            <!-- <mat-error *ngIf="{{`f1[${field.fieldName}].hasError('required')`}}">Name Required
                                            </mat-error> -->
                                        </mat-form-field>
                                    </ng-container>

                                    <ng-container *ngIf="field.fieldType === 'number'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput placeholder={{field.label}} type="number"
                                                name="{{field.fieldName}}" required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" value={{field.value}}>
                                            <!-- <mat-error *ngIf="{{`f1[${field.fieldName}].hasError('required')`}}">Name Required
                                            </mat-error> -->
                                        </mat-form-field>
                                    </ng-container>

                                    <ng-container *ngIf="field.fieldType === 'date'">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <input matInput type="date" name="{{field.fieldName}}"
                                                required="{{field.isMandatory}}" disabled="{{!field.isEnabled}}"
                                                value="{{field.value}}">
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngIf="field.fieldType === 'dropdown'">
                                        <!-- bloodGroup -->
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>{{field.label}}</mat-label>
                                            <mat-select placeholder={{field.label}} 
                                                required="{{field.isMandatory}}"
                                                disabled="{{!field.isEnabled}}" 
                                                name="{{field.fieldName}}"
                                                value="{{field.value}}">
                                                <mat-option *ngFor="let opt of field.options" [value]="opt.value">
                                                    {{opt.label}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngIf="field.fieldType === 'radio'">
                                        <div class="my-4">
                                            <div class="d-flex box_shadow_0 space-between"
                                                style="background: #00000005;">
                                                <div *ngFor="let opt of field.options"
                                                    class="form-row d-flex box_shadow_0 align-items-center justify-content-center">
                                                    <input type="radio" name="{{field.fieldName}}" value="{{opt.value}}"
                                                        required="{{field.isMandatory}}" disabled="{{!field.isEnabled}}"
                                                        id="{{opt.value}}" class="form-input">
                                                    <span class="material-symbols-outlined fs-16 mr-1">
                                                        {{opt.icon | lowercase}}
                                                    </span>
                                                    <label for="{{opt.value}}" class="form-label">{{opt.label |
                                                        uppercase}} {{field.value == opt.value}}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </ng-container>
                                <div class="d-flex justify-content-around my-4">
                                    <button mat-stroked-button matStepperPrevious>Back</button>
                                    <div class="spacer"></div>
                                    <button mat-raised-button matStepperNext color="primary">Save And Next</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </mat-step>

                <mat-step>
                    <ng-template matStepLabel>Submit Fee</ng-template>
                    <div class="d-flex justify-content-center " style="height: 70vh;">
                        <div class="col-sm-12 col-md-8 col-lg-8">

                            <button mat-raised-button color="accent">proceed to pay</button>
                            <button mat-raised-button color="accent" (click)="generatePdf()">Print Form</button>
                            <div class="d-flex justify-content-end">
                                <button mat-raised-button matStepperPrevious>Back</button>
                                <button mat-raised-button color="primary" (click)="onAdmissionComplete()">Done</button>
                            </div>
                            <div id="iframeContainer"></div>
                        </div>
                    </div>

                </mat-step>

            </mat-vertical-stepper>

        </mat-card>
    </div>
</section>