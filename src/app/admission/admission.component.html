<section style="min-height: calc(100vh-6rem);" style="margin-bottom: 5rem;">
    <div class="fadeIn" style="max-height: 100vh;">
        <mat-card class="card border-0  p-0" style="font-size: 12px;">
            <mat-vertical-stepper #stepper>
                <mat-step [stepControl]="studentForm" class="">
                    <form class="stepper_form my-4 py-2 " [formGroup]="studentForm">
                        <ng-template matStepLabel>Required Student Details</ng-template>
                        <div class=" d-flex justify-content-center">
                            <div class="col-sm-12 col-md-10 col-lg-10">
                                <div class="mb-2">
                                    <mat-label class="text-primary ">Student's Information</mat-label>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">

                                        <ng-container *ngFor="let field of admissionFormFields?.controls">
                                            <div class="row " *ngIf="
                                            [
                                              'text',
                                              'password',
                                              'email',
                                              'number',
                                              'search',
                                              'tel',
                                              'url'
                                            ].includes(field.type)
                                          ">
                                                <div class="col-3 text-left justify-content-center">
                                                    <small>{{field.label}}{{field?.validators?.required ? '*' :
                                                        ''}}</small>
                                                </div>
                                                <div class="col-9 text-left">
                                                    <mat-form-field appearance="outline" class="w-100">
                                                        <mat-label>{{field.label}}</mat-label>
                                                        <input matInput type="field.type"
                                                            [formControlName]="field.name">
                                                    </mat-form-field>
                                                </div>
                                            </div>

                                            <div class="row" *ngIf="field.type === 'textarea'">
                                                <div class="col-3 text-left">
                                                    <small>{{field.label}} {{field.validators?.required ? '*' :
                                                        ''}}</small>
                                                </div>
                                                <div class="col-9 text-left">
                                                    <mat-form-field appearance="outline" class="w-100">
                                                        <mat-label>{{field.label}}</mat-label>
                                                        <textarea matInput placeholder="Ex:description"
                                                            [formControlName]="field.name"></textarea>
                                                        <!-- <mat-hint>{{field.hint}}</mat-hint> -->
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <ng-container *ngIf="field.type === 'radio'">
                                                <div class="row my-4">
                                                    <div class="col-3 text-left">
                                                        <small>{{field.label}} {{field.validators?.required ? '*' :
                                                            ''}}</small>
                                                    </div>
                                                    <div class="col-9 text-left">
                                                        <mat-radio-group [formControlName]="field.name">
                                                            <mat-radio-button class="mr-4 w-50"
                                                                *ngFor="let opt of field.options" [value]="opt.value">
                                                                <span class="fs-14 ">{{opt.label}}</span>
                                                            </mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngIf="field.type === 'date'">
                                                <div class="row my-4">
                                                    <div class="col-3 text-left">
                                                        <small>{{field.label}} {{field.validators?.required ? '*' :
                                                            ''}}</small>
                                                    </div>
                                                    <div class="col-9 text-left">
                                                        <mat-form-field appearance="outline" class="w-100">
                                                            <input matInput [formControlName]="field.name"
                                                                placeholder="MM/DD/YYYY" [matDatepicker]="dp3"
                                                                [disabled]="true">
                                                            <mat-datepicker-toggle matSuffix
                                                                [for]="dp3"></mat-datepicker-toggle>
                                                            <mat-datepicker #dp3 disabled="false"></mat-datepicker>
                                                        </mat-form-field>
                                                    </div>
                                                </div>

                                            </ng-container>
                                            <ng-container *ngIf="field.type === 'dropdown'">
                                                <div class="row my-4">
                                                    <div class="col-3 text-left">
                                                        <small>{{field.label}} {{field.validators?.required ? '*' :''}}</small>
                                                    </div>
                                                    <div class="col-9 text-left">
                                                        <mat-form-field appearance="outline" class="w-100" (click)="fetchValue(field)">
                                                            <mat-select [formControlName]="field.name">
                                                                <mat-option value="">Select {{field.label || ''}}</mat-option>
                                                                <ng-container *ngIf="field?.hitHttp && field?.method;else options">
                                                                    <mat-option *ngFor="let option of this.commonService.formOptions[field.method] | async" [value]="option.value">{{option.label}}
                                                                    </mat-option>
                                                                </ng-container>
                                                                <ng-template #options>
                                                                    <mat-option *ngFor="let option of field?.options" [value]="option.value">{{option.label}}
                                                                    </mat-option>
                                                                </ng-template>
                                                            </mat-select>
                                                        </mat-form-field>
                                                    </div>
                                                </div>

                                            </ng-container>
                                        </ng-container>
                                    </div>
                                    <div class="col-md-6  g-2">
                                        <div class="d-flex justify-content-center text-center">
                                            <div>
                                                <div class="box_shadow_3 mx-auto layout rounded-lg"
                                                    style="position:relative;width:200px;min-height: 200px;border: 1px solid #ccc ;">
                                                    <div class="rounded-pill box_shadow_0 bg-white my-auto"
                                                        style="position: absolute;left: -20px;">
                                                        <div class="d-flex flex-column rounded-pill ">
                                                            <button type="button" mat-icon-button class="m-0 p-0 bb"
                                                                (click)="fileUpload.click()">
                                                                <mat-icon style="font-size: 16px;">add_circle</mat-icon>
                                                            </button>
                                                            <button type="button" mat-icon-button class="m-0 p-0 bb">
                                                                <mat-icon style="font-size: 16px;">crop</mat-icon>
                                                            </button>
                                                            <button type="button" mat-icon-button class="m-0 p-0"
                                                                (click)="fileUploadReset()">
                                                                <mat-icon style="font-size: 16px;">clear</mat-icon>
                                                            </button>
                                                        </div>
                                                        <input type="file" formControlName="image" #fileUpload
                                                            (change)="onImagePicked($event)"
                                                            style="width: 0;height: 0;visibility: hidden;"
                                                            accept="image/png,image/jpeg">
                                                    </div>
                                                    <div *ngIf="!imagePreview" (click)="fileUpload.click()"
                                                        style="cursor: pointer;">
                                                        <mat-icon style="color:#666;width: 100%;">add_a_photo</mat-icon>
                                                        <p mat-line class="text-muted py-2">Upload Photo</p>
                                                    </div>
                                                    <div *ngIf="imagePreview!=='' && imagePreview">
                                                        <img class="thumbnail-md" [src]="imagePreview"
                                                            style="border-radius: 4px;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-end my-4">
                                    <button mat-raised-button type="submit" color="primary" (click)="onStudentSubmit()"
                                        matStepperNext>Save and
                                        Next</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </mat-step>

                <mat-step>
                    <ng-template matStepLabel>Submit Fee</ng-template>
                    <div class="d-flex justify-content-center " style="height: 70vh;">
                        <div class="col-sm-12 col-md-8 col-lg-8">

                            <button mat-raised-button color="accent">proceed to pay</button>
                            <button mat-raised-button color="accent" (click)="generatePdf()">Print Form</button>
                            <div class="d-flex justify-content-end">
                                <button mat-raised-button matStepperPrevious>Back</button>
                                <button mat-raised-button color="primary" (click)="onAdmissionComplete()">Done</button>
                            </div>
                            <div id="iframeContainer"></div>
                        </div>
                    </div>

                </mat-step>

            </mat-vertical-stepper>

        </mat-card>
    </div>
</section>