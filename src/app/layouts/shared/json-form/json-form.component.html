<form class="my-4" [formGroup]="form" (ngSubmit)="onFormSubmit()">
    <ng-container *ngFor="let field of formFields?.controls">
        <ng-container *ngIf="
                [
                  'text',
                  'password',
                  'email',
                  'number',
                  'search',
                  'tel',
                  'url'
                ].includes(field.type)
              ">
            <div class="row ">
                <div class="col-4 text-left justify-content-center">
                    <label>{{field.label}}{{field?.validators?.required ? '*' :
                        ''}}</label>
                </div>
                <div class="col-8 text-left">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>{{field.label}}</mat-label>
                        <input matInput type="field.type" #input appInputMask="{{field.type}}"
                            [formControlName]="field.name">
                        <mat-hint align="end" *ngIf="field?.validators?.maxLength">{{input.value.length}}
                            /
                            {{field?.validators?.maxLength}}</mat-hint>
                        <mat-error *ngIf="studentForm.get(field.name).hasError('required')">You
                            must make a selection</mat-error>
                        <mat-error *ngIf="studentForm.get(field.name).hasError('maxlength')">Max
                            length</mat-error>
                        <mat-error *ngIf="studentForm.get(field.name).hasError('pattern')">Error
                            pattern</mat-error>
                    </mat-form-field>
                </div>
            </div>
        </ng-container>

        <ng-container *ngIf="field.type === 'textarea'">
            <div class="row">
                <div class="col-4 text-left">
                    <label>{{field.label}} {{field.validators?.required ? '*' :
                        ''}}</label>
                </div>
                <div class="col-8 text-left">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>{{field.label}}</mat-label>
                        <textarea matInput placeholder="Ex:description" [formControlName]="field.name"></textarea>
                        <!-- <mat-hint>{{field.hint}}</mat-hint> -->
                    </mat-form-field>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="field.type === 'radio'">
            <div class="row my-4">
                <div class="col-4 text-left">
                    <label>{{field.label}} {{field.validators?.required ? '*' :
                        ''}}</label>
                </div>
                <div class="col-8 text-left">
                    <mat-radio-group [formControlName]="field.name">
                        <mat-radio-button class="mr-4 w-50" *ngFor="let opt of field.options" [value]="opt.value">
                            <span class="fs-14 ">{{opt.label}}</span>
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="field.type === 'date'">
            <div class="row my-4">
                <div class="col-4 text-left">
                    <label>{{field.label}} {{field.validators?.required ? '*' :
                        ''}}</label>
                </div>
                <div class="col-8 text-left">
                    <mat-form-field appearance="outline" class="w-100">
                        <input matInput [formControlName]="field.name" #input placeholder="MM/DD/YYYY"
                            [matDatepicker]="dp3" [disabled]="true">
                        <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
                        <mat-datepicker #dp3 disabled="false"></mat-datepicker>
                        <mat-hint *ngIf="input?.value">{{input?.value | age}}
                            years</mat-hint>
                    </mat-form-field>
                </div>
            </div>

        </ng-container>
        <ng-container *ngIf="field.type === 'dropdown'">
            <div class="row my-4">
                <div class="col-4 text-left">
                    <label>{{field.label}} {{field.validators?.required ? '*'
                        :''}}</label>
                </div>
                <div class="col-8 text-left">
                    <mat-form-field appearance="outline" class="w-100" (click)="fetchValue(field)">
                        <mat-select [formControlName]="field.name"
                            (selectionChange)="onSelectOption($event,field?.actions)">
                            <mat-option value="">Select {{field.label ||
                                ''}}</mat-option>
                            <ng-container *ngIf="field?.hitHttp && field?.method;else options">
                                <mat-option *ngFor="let option of this.commonService.formOptions[field.method] | async"
                                    [value]="option.value">{{option.label}}
                                </mat-option>
                            </ng-container>
                            <ng-template #options>
                                <mat-option *ngFor="let option of field?.options"
                                    [value]="option.value">{{option.label}}
                                </mat-option>
                            </ng-template>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="field.type === 'autocomplete'">
            <div class="row my-4">
                <div class="col-4 text-left">
                    <label>{{field.label}} {{field.validators?.required ? '*' :
                        ''}}</label>
                </div>
                <div class="col-8 text-left">
                    <mat-form-field appearance="outline" class="w-100">
                        <input type="text" placeholder="Select {{field.label}}" aria-label={{field.label}} matInput
                            [formControlName]="field.name" [matAutocomplete]="auto">
                        <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let option of field.options" [value]="option.value">
                                {{option.label}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="field.type === 'image'">
            <div class="row my-4">
                <div class="col-4 text-left">
                    <label>{{field.label}} {{field.validators?.required ? '*' :
                        ''}}</label>
                </div>
                <div class="col-8 text-left">
                    <app-image-picker
                        (onImageSelect)="onImageSelect($event,field.name,'studentForm')"></app-image-picker>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="field.type === 'checkbox'">
            <div class="row my-4">
                <!-- <div class="col-4 text-left">

                </div> -->
                <div class="col-12 text-left">
                    <mat-checkbox [formControlName]="field.name" [disabled]="field?.disabled">
                        {{field.label}} {{field.validators?.required ? '*' :
                        ''}}
                    </mat-checkbox>
                </div>
            </div>
        </ng-container>
    </ng-container>
    <mat-toolbar>
        <button mat-stroked-button type="reset">Reset</button>
        <button mat-raised-button type="submit">Submit</button>
    </mat-toolbar>
</form>