<div class="">
  <!--table heading-->
  <mat-toolbar class="bg-mysecondary">
    <mat-toolbar-row>
      <div class="px-1 ml-n2">
        <button mat-icon-button routerLink='/configuration/master-standard'>
            <mat-icon class="mat-icon-md text-mylight pt-0">arrow_back</mat-icon>
            <span>{{selectedStandardName}}</span>
        </button>
    </div>

      <div class="spacer"></div>

     
      <span class="px-1">
        <ng-container *ngIf="!dataSource.data.length">
          <button mat-stroked-button color="" class="btn-dark" (click)="clickToAction('ADD')"
            [disabled]='!standardId'>
            <mat-icon class="mat-icon-sm pt-1">add_box</mat-icon>
            <small >
              Add Fee Structure
            </small>
          </button>
        </ng-container>
        <ng-container *ngIf="dataSource.data.length">
          <button mat-stroked-button color="" class="btn-dark" (click)="clickToAction('UPDATE')"
            [disabled]='!standardId'>
            <mat-icon class="mat-icon-sm pt-1">add_box</mat-icon>
            <small>Update Fee Structure</small>
          </button>
        </ng-container>
      </span>
    </mat-toolbar-row>
  </mat-toolbar>
  <!--more action on selected row-->
  <mat-toolbar class="bg-white">
    <mat-toolbar-row>
      <div class="px-1 " *ngIf="!this.selection.selected.length">
        <button mat-icon-button (click)="refresh()">
          <mat-icon class="mat-icon-md mat-icon-light pt-0">refresh</mat-icon>
        </button>
      </div>
      <ng-container *ngIf="this.selection.selected.length">
        <app-bulk-actions></app-bulk-actions>
      </ng-container>
      <div class="spacer"></div>
      <ng-container *ngIf="!this.selection.selected.length">
        <app-filter (onEvent)="applyFilter($event)"></app-filter>
      </ng-container>
    </mat-toolbar-row>
  </mat-toolbar>
  <mat-toolbar >
    <mat-toolbar-row >
      <small>Showing fee structure for {{selectedStandardName}}</small>
      <div class="spacer"></div>
      <span class="px-2" style="min-width: 8rem;">
        <button id="selectStandardbtn" style="min-width: 8rem;" class="btn-mydark" mat-stroked-button
          [matMenuTriggerFor]="standards" #t="matMenuTrigger">

          <small style="font-size: 12px;color: rgba(204, 204, 204, 0.351);">Class | </small>
          <small class="w-100">{{(selectedStandardName | titlecase )|| 'Select'}}</small>

          <mat-icon class="mat-icon-sm pt-1">{{t.menuOpen? 'arrow_drop_up' : 'arrow_drop_down'}}</mat-icon>
        </button>
        <mat-menu #standards="matMenu" hasBackdrop="true" class="w-100" style="min-width: 10rem;">
          <button mat-menu-item *ngFor="let data of standardList" class="w-100"
            (click)="selectedStandard = data.name;onStandardChange(data);">
            <small [class.selected]="data._id == standardId">{{data.name | titlecase}}</small>
          </button>
        </mat-menu>

      </span>
      
    </mat-toolbar-row>
  </mat-toolbar>
  <table mat-table [dataSource]="dataSource" class="w-100  mb-5" matSort aria-label="Elements" *ngIf="dataSource && dataSource.data.length != 0 ">

    <!-- Checkbox Column -->
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef class="text-left">
        <div class="layout">
          <mat-checkbox (change)="$event ? masterToggle() : null" class="mb-n2 pr-1"
            [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
          </mat-checkbox>
        </div>
      </th>
      <td mat-cell *matCellDef="let row" style="width: 2rem;" class="text-left">
        <div class="layout">
          <mat-checkbox (click)="$event.stopPropagation()" class="mb-n2 pr-1 "
            (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)"
            [aria-label]="checkboxLabel(row)">
          </mat-checkbox>
        </div>
      </td>
      <td mat-footer-cell *matFooterCellDef><strong>Total</strong> </td>
    </ng-container>
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
      <td mat-cell *matCellDef="let row">
        <small>{{row?.fee?.name|| '...'}}</small>
      </td>
      <td mat-footer-cell *matFooterCellDef> </td>
    </ng-container>

    <ng-container matColumnDef="frequency">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        <span>Frequency<br>( In Months )</span>
      </th>
      <td mat-cell *matCellDef="let row">
        <small>{{(row?.fee?.frequency | feeFrequency) || '...'}}</small>
      </td>
      <td mat-footer-cell *matFooterCellDef> </td>
    </ng-container>

    <ng-container matColumnDef="optional">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Optional</th>
      <td mat-cell *matCellDef="let row">
        <small>{{row?.fee?.isOptional ? 'YES' : 'NO' || '...'}}</small>
      </td>
      <td mat-footer-cell *matFooterCellDef> </td>
    </ng-container>

    <ng-container matColumnDef="amount">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Amount </th>
      <td mat-cell *matCellDef="let row">
        <small>{{(row.amount | currency:'INR') || '0'}}</small>
      </td>
      <td mat-footer-cell *matFooterCellDef> <strong>{{getTotalCost() | currency : 'INR'}}</strong> </td>
    </ng-container>

    <!-- Action Column -->
    <!-- <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef class="text-right">Action</th>
      <td mat-cell *matCellDef="let row" (click)="$event.stopPropagation()" class="text-right">
        <app-menu-button (onMenuClick)="menuClickHandler($event,row);"></app-menu-button>
      </td>
      <td mat-footer-cell *matFooterCellDef></td>
    </ng-container> -->


    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>


    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
  </table>
  <ng-container *ngIf="!dataSource.data.length">
    <app-empty-list></app-empty-list>
  </ng-container>
</div>