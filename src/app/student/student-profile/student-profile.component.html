<section style="min-height: calc(100vh-6rem);">
  <mat-toolbar class="bg-mysecondary" style="max-height: 3rem;position:sticky;top:0;z-index: 2;">
    <div class="px-1 ml-n2">
      <button mat-icon-button routerLink='..' >
        <mat-icon class="mat-icon-md text-mylight pt-0">arrow_back</mat-icon>
        <span>{{name()}}</span>
      </button>
    </div>
    <div class="spacer"></div>
  </mat-toolbar>

  <mat-tab-group dynamicHeight animationDuration="0ms" mat-align-tabs="center"
    (selectedTabChange)="selectedTabChange($event)" [selectedIndex]="selectedIndex">
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="mat-icon-sm pt-1 mr-2">menu_book</mat-icon>
        Overview
      </ng-template>
      <ng-template matTabContent>
        <ng-container *ngIf="this.studentData">
          <div class="container mt-2 mb-2 pt-4 ">
            <mat-card>
              <div class="row justify-content-center py-5">
                <div class="col-md-4">
                  <figure>
                    <img class="thumbnail-lg" [src]="this.studentData.studentPhoto" [alt]="this.studentData?.name">
                  </figure>
                </div>
                <div class="col-md-6  text-left">
                  <div class="d-flex flex-column">
                    <h3 class="py-0 my-0">{{ this.studentData?.name | titlecase}}</h3>
                    <div class="row">
                      <div class="col-2 text-left">
                        <small class="text-mylight">S/o -</small>
                      </div>
                      <div class="col-9 text-left">
                        <small class="text-mylight">{{ this.parentData?.fatherName}}</small>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-2 text-left">
                        <small class="text-mylight">Div -</small>
                      </div>
                      <div class="col-9 text-left">
                        <small class="text-mylight">{{this.studentData?.classId.name}}</small>
                      </div>
                    </div>
    
                    <div class="d-flex my-2">
                      <button mat-stroked-button (click)="updateProfile()" class="mr-1">
                        <mat-icon class="mat-icon-sm pt-1 mr-2">edit</mat-icon>
                        <small class="text-mylight">UPDATE</small>
                      </button>
                      <button mat-stroked-button (click)="printProfile()" class="mx-1">
                        <mat-icon class="mat-icon-sm pt-1 mr-2">print</mat-icon>
                        <small class="text-mylight">Print</small>
                      </button>
    
                    </div>
    
                  </div>
                </div>
              </div>
            </mat-card>
            <mat-toolbar color="primary">
              <span>Student</span>
            </mat-toolbar>
            <mat-card>
              <!-- <pre>{{studentData |json}}</pre> -->
              <div class="row">
                <div class="col-md-6">
                  <ng-container *ngFor="let data of studentData | keyvalue">
                    <ng-container *ngIf="displayStudentFields.includes(data.key)">
                      <div class="row">
                        <div class="col-6 text-left">
                          <!-- <p>{{LABELS[data.key]}}</p> -->
                          <p class="titlecase">{{data.key | label}}</p>

                        </div>
                        <div class="col-6 text-left">
                          <p>{{ (data.value || '')}}</p>
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </div>
              </div>
            </mat-card>


          </div>
        </ng-container>
      </ng-template>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="mat-icon-sm pt-1 mr-2">money</mat-icon>
        Applied Fee
      </ng-template>

      <div class="container" style="min-height: 40vh;" *ngIf="appliedFee">

        <table hidden mat-table [dataSource]="appliedFee" class="w-100  mb-5" aria-label="Elements">


          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Applied Fees</th>
            <td mat-cell *matCellDef="let row">
              <small>{{row.fee.name || '...'}}</small>
            </td>

            <td mat-footer-cell *matFooterCellDef> Total Amount</td>

          </ng-container>

          <ng-container matColumnDef="frequency">
            <th mat-header-cell *matHeaderCellDef>Frequency</th>
            <td mat-cell *matCellDef="let row">
              <small>{{row.frequency || '...'}}</small>
            </td>

            <td mat-footer-cell *matFooterCellDef> </td>

          </ng-container>

          <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef>Amount </th>
            <td mat-cell *matCellDef="let row">
              <small>{{(row.amount || '0' ) | currency:'INR'}}</small>
            </td>

            <td mat-footer-cell *matFooterCellDef> <strong>{{getTotalCost() | currency : 'INR'}}</strong> </td>

          </ng-container>

          <!-- Action Column -->
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef class="text-right">Action</th>
            <td mat-cell *matCellDef="let row" (click)="$event.stopPropagation()" class="text-right">
              <button mat-icon-button>
                <mat-icon class="text-mylight">more_horiz</mat-icon>
              </button>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>


          </ng-container>

          <!-- Disclaimer column -->
          <ng-container matColumnDef="disclaimer">

            <td mat-footer-cell *matFooterCellDef> Total Deposit</td>

          </ng-container>
          <ng-container matColumnDef="frequency1">

            <td mat-footer-cell *matFooterCellDef></td>

          </ng-container>
          <ng-container matColumnDef="amount1">

            <td mat-footer-cell *matFooterCellDef> <strong>{{ totalFeeDeposit | currency : 'INR'}}</strong></td>

          </ng-container>
          <ng-container matColumnDef="action1">
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>

          <!-- Disclaimer column -->
          <ng-container matColumnDef="disclaimer2">

            <td mat-footer-cell *matFooterCellDef> Total Due</td>

          </ng-container>
          <ng-container matColumnDef="frequency2">

            <td mat-footer-cell *matFooterCellDef></td>

          </ng-container>
          <ng-container matColumnDef="amount2">
            <td mat-footer-cell *matFooterCellDef> <strong>{{ getTotalCost() - totalFeeDeposit | currency :
                'INR'}}</strong></td>
          </ng-container>
          <ng-container matColumnDef="action2">
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
          <tr mat-footer-row *matFooterRowDef="['disclaimer','frequency1','amount1','action1']"
            class="example-second-footer-row"></tr>
          <tr mat-footer-row *matFooterRowDef="['disclaimer2','frequency2','amount2','action2']"
            class="example-second-footer-row"></tr>

        </table>

      </div>
      <div *ngIf="!appliedFee" class="container mt-4 pt-2 mb-2" style="min-height: 50vh;">
        <div class="d-flex flex-column justify-content-center align-items-center h-50 w-100">
          <small class="mat-caption"> You don’t have any fee records</small><br>
          <small class="strong" style="color:#ccc;"> You don’t have any records</small>
          <button mat-button (click)="openfeeDeposit()">
            <small>Submit Fee</small>
          </button>
        </div>
      </div>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="mat-icon-sm pt-1 mr-2"></mat-icon>
        All Transactions
      </ng-template>
      <div class="container mt-4 pt-2 mb-2" style="min-height: 50vh;">
        <div class="d-flex flex-column justify-content-center align-items-center h-50 w-100">
          <small class="mat-caption"> You don’t have any fee records</small><br>
          <small class="strong" style="color:#ccc;"> You don’t have any records</small>
          <button mat-button (click)="openfeeDeposit()">
            <small>Submit Fee</small>
          </button>
        </div>
      </div>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="mat-icon-sm pt-1 mr-2">school</mat-icon>
        Accademic
      </ng-template>

      <div class="container mt-4 pt-2 mb-2" style="min-height: 50vh;">
        <div class="d-flex flex-column justify-content-center align-items-center h-50 w-100">
          <small class="mat-caption"> You don’t have any accademic records</small><br>
          <small class="strong" style="color:#ccc;"> You don’t have any records</small>
          <a routerLink="/admission">
            <small></small>
          </a>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>



</section>